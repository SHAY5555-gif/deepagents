services:
  # Redis for LangGraph pub-sub
  - type: redis
    name: deepagents-redis
    plan: starter
    region: frankfurt
    ipAllowList: []

  # PostgreSQL for LangGraph state persistence
  - type: pserv
    name: deepagents-postgres
    plan: starter
    region: frankfurt

  # LangGraph API server (Docker)
  - type: web
    name: deepagents-langgraph
    runtime: docker
    plan: starter
    region: frankfurt
    branch: main
    dockerfilePath: ./Dockerfile
    envVars:
      - key: REDIS_URI
        fromService:
          type: redis
          name: deepagents-redis
          property: connectionString
      - key: DATABASE_URI
        fromDatabase:
          name: deepagents-postgres
          property: connectionString
      - key: ANTHROPIC_API_KEY
        sync: false
      - key: LANGSMITH_API_KEY
        sync: false
      - key: LANGCHAIN_TRACING_V2
        value: "true"
      - key: LANGCHAIN_PROJECT
        value: deepagents
      - key: XAI_API_KEY
        sync: false
      - key: TAVILY_API_KEY
        sync: false
      - key: GOOGLE_API_KEY
        sync: false
      - key: OPENAI_API_KEY
        sync: false
      - key: OPENAI_MODEL
        value: gpt-4
      - key: BROWSERBASE_API_KEY
        sync: false
      - key: BROWSERBASE_PROJECT_ID
        sync: false
      - key: BROWSERBASE_CONTEXT_ID
        sync: false
      - key: BROWSERBASE_REGION
        value: eu-central-1
